Kucheka = angular.module('Kucheka', ['ngResource'])

Kucheka.controller "KuchekaCtrl", KuchekaCtrl = ($scope, $http, $resource, $routeParams, $location) ->
  
  $scope.isActive = (route) ->
    route is $location.path()

Kucheka.controller "KuchekaUserCtrl", KuchekaUserCtrl = ($scope, $http, $resource, $routeParams, $location) ->
  
  $scope.name = "Vasily"
  $scope.bio = "Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Donec id elit non mi porta gravida at eget metus."

Kucheka.config ($routeProvider, $locationProvider) ->
  $locationProvider.html5Mode(true)
  $routeProvider.when("/",
    templateUrl: "<%= asset_path 'angular/partials/home.tpl.html' %>"
    controller: "KuchekaCtrl"
  ).when("/about",
    templateUrl: "<%= asset_path 'angular/partials/about.tpl.html' %>"
  ).when("/:user_name",
      templateUrl: "<%= asset_path 'angular/partials/profile.tpl.html' %>"
      controller: "KuchekaUserCtrl"
  ).otherwise redirectTo: "/"
